import{_ as M}from"./VPaginator.vue_vue_type_script_setup_true_lang-Ca-Vza0W.js";import{s as P,a as R}from"./index-2Uz0LzdM.js";import{s as W}from"./index-BWNXx86c.js";import{f as F,u as N,h as o,D as S,C as Y,E as j,o as h,c as E,b as s,a,v as i,s as H,O as K,A as q,n as T,t as g,j as C,a4 as O,q as G,H as J,K as Q}from"./index-rkqDWn-K.js";import{s as X}from"./index-2e_aBQmh.js";import{u as Z}from"./index-BJLvgVPt.js";import{t as ee}from"./helpers-BF5XYaOm.js";import"./index-p1M208JQ.js";import"./index-DMxJWgcx.js";import"./index-BZ2gPtDN.js";import"./index-Bv-llqAV.js";import"./index-DOXnOG33.js";const te={class:"v-card !p-3"},se={class:"flex items-center justify-between"},ae={class:"hidden md:flex items-end gap-2 justify-end"},le={class:"grid gap-1"},oe={class:"grid gap-1"},ne={class:"flex flex-col gap-2"},ie={class:"grid gap-1"},re={class:"grid gap-1"},de={class:"grid grid-cols-2 gap-2 mt-2"},ue={class:"mt-2 h-[calc(100dvh-10rem)] md:h-[calc(100dvh-11rem)]"},pe={class:"w-full h-full overflow-y-auto rounded-lg"},me={class:"text-center font-medium"},ce={class:"flex items-center gap-1"},_=10,$e=F({__name:"WalletHistoryView",setup(ve){const V=q(),$=N(),r=o({type:[{label:"All",value:void 0},{label:"Deposits",value:"deposit"},{label:"Withdrawals",value:"withdrawal"},{label:"Investments",value:"investment"},{label:"Profits",value:"profit"}],status:["All","Successful","Pending","Failed"]}),d=o(r.value.type[0]),u=o(r.value.status[0]),p=o(!1),w=o([]),m=o(0),D=S(()=>m.value*_),x=o(!1),c=o(!1),k=o(null),A=S(()=>{const l=new URLSearchParams;return l.append("skip",D.value.toString()),l.append("limit",_.toString()),l.append("sort","createdAt,DESC"),l.append("where",`userId,${$.user.id}`),d.value.value&&l.append("where",`transactionType,${d.value.value}`),u.value!=="All"&&l.append("where",`status,${u.value.toLowerCase()}`),l.toString()}),v=async()=>{await Z(`user/transactions?${A.value}`,{loading:c,error:k,config:{router:V,cache:!0}},l=>{x.value=l.data.length<_,w.value=l.data})},U=async()=>{p.value=!1,await v()};return Y(m,()=>v()),j(async()=>{await v()}),(l,t)=>{const f=X,y=H,z=K,I=Q,n=R,b=W,L=P,B=M;return h(),E("div",null,[s("div",te,[s("div",se,[t[12]||(t[12]=s("h1",{class:"text-lg font-semibold text-primary-500 dark:text-primary-400"},"Wallet History",-1)),s("div",ae,[s("div",le,[t[10]||(t[10]=s("p",{class:"text-sm font-medium text-mute text-right"},"Type",-1)),a(f,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),size:"small",options:r.value.type,"option-label":"label"},null,8,["modelValue","options"])]),s("div",oe,[t[11]||(t[11]=s("p",{class:"text-sm font-medium text-mute text-right"},"Status",-1)),a(f,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),size:"small",options:r.value.status},null,8,["modelValue","options"])]),a(y,{onClick:v,loading:c.value,label:"Submit",size:"small"},null,8,["loading"])]),a(y,{onClick:t[2]||(t[2]=e=>p.value=!0),class:"md:hidden",label:"Filters",icon:"pi pi-filter","icon-pos":"right",size:"small"})]),a(z,{visible:p.value,"onUpdate:visible":t[6]||(t[6]=e=>p.value=e),modal:"",header:"Filters",class:"w-80"},{default:i(()=>[s("div",ne,[s("div",ie,[t[13]||(t[13]=s("p",{class:"text-sm font-medium text-mute"},"Type",-1)),a(f,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),size:"small",options:r.value.type,"option-label":"label"},null,8,["modelValue","options"])]),s("div",re,[t[14]||(t[14]=s("p",{class:"text-sm font-medium text-mute"},"Status",-1)),a(f,{modelValue:u.value,"onUpdate:modelValue":t[4]||(t[4]=e=>u.value=e),size:"small",options:r.value.status},null,8,["modelValue","options"])]),s("div",de,[a(y,{onClick:t[5]||(t[5]=e=>p.value=!1),size:"small",severity:"secondary",label:"Cancel"}),a(y,{onClick:U,loading:c.value,size:"small",label:"Submit"},null,8,["loading"])])])]),_:1},8,["visible"])]),s("div",ue,[s("div",pe,[a(L,{loading:c.value,value:w.value,selectionMode:"single",dataKey:"id",metaKeySelection:!1,stripedRows:"",class:"text-sm",onRowSelect:t[7]||(t[7]=e=>l.$router.push({name:"transaction",params:{id:e.data.id}})),tableStyle:"min-width: 50rem; white-space: nowrap"},{default:i(()=>[a(n,{field:"transactionType",header:"Type"},{body:i(({data:e})=>[s("div",{class:T(["flex-col-center",e.transactionType==="deposit"||e.transactionType==="profit"?"text-green-500":"text-red-500"])},[a(I,{prime:"",name:e.transactionType==="deposit"||e.transactionType==="profit"?"arrow-circle-down":"arrow-circle-up"},null,8,["name"]),s("small",me,g(C(ee)(e.transactionType)),1)],2)]),_:1}),a(n,{field:"createdAt",header:"Date"},{body:i(({data:e})=>[s("p",null,g(C(O)(e.createdAt,"dddd YYYY-MM-DD, hh:mm:ss A",{locales:"en-US"})),1)]),_:1}),a(n,{field:"id",header:"Transaction ID"}),a(n,{field:"amountInUSD",header:"Amount (USD)"},{body:i(({data:e})=>[s("p",{class:T(["font-medium",e.transactionType==="deposit"||e.transactionType==="profit"?"text-green-500":"text-red-500"])},g(`$${e.amountInUSD}`),3)]),_:1}),a(n,{field:"currency",header:"Currency"},{body:i(({data:e})=>[s("div",ce,[s("p",null,g(e.currency),1),e.isWireTransfer?(h(),G(b,{key:0,size:"small",class:"text-xs whitespace-nowrap",value:"Wire Transfer"})):J("",!0)])]),_:1}),a(n,{field:"rate",header:"Rate"}),a(n,{field:"amountInCurrency",header:"Amount in Currency"}),a(n,{field:"status",header:"Status"},{body:i(({data:e})=>[a(b,{severity:e.status==="successful"?"success":e.status==="pending"?"warn":"danger",value:e.status},null,8,["severity","value"])]),_:1})]),_:1},8,["loading","value"]),a(B,{allLoaded:x.value,rows:_,onPrev:t[8]||(t[8]=e=>m.value=e),onNext:t[9]||(t[9]=e=>m.value=e)},null,8,["allLoaded"])])])])}}});export{$e as default};
