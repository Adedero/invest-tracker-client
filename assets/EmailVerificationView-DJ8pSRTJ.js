import{f as I,h as c,E as V,o as $,c as x,a,b as i,j as r,v as b,L as j,A as E,l as q,O as B,k as g,K as C,B as N}from"./index-BeBYLbm4.js";import{_ as z}from"./OtpVerification.vue_vue_type_script_setup_true_lang-BZnS1Bdd.js";import{u as A}from"./index-CODlRzTV.js";import"./index-DqODuYUk.js";import"./index-BJYIcNqT.js";import"./index-Dnf1wTNt.js";import"./index-Ca6bNHhN.js";import"./ErrorMessage.vue_vue_type_script_setup_true_lang-CC07B55Y.js";import"./helpers-BF5XYaOm.js";import"./index-ans_9-if.js";const D={class:"w-full md:w-[26rem] h-full md:p-10 md:bg-white dark:bg-transparent"},L={class:"mt-8"},M={class:"mt-2 flex flex-col items-center justify-center gap-2"},Q=I({__name:"EmailVerificationView",setup(O){const t=j(),m=E(),u=atob((t.query.email??"").toString()),d=(t.query.userId??"").toString(),f=(t.query.token??"").toString(),v=(t.query.emailSubject??"").toString(),n=c(!1),p=c(!1),_=c(null),y=async o=>{const e=`auth/verify-email?userId=${d}`,s=f?`${e}&token=${o}`:`${e}&otp=${o}`;await A(s,{loading:p,error:_,config:{method:"POST",withCredentials:!1,router:m,body:{email:u}}},()=>{n.value=!0,localStorage.removeItem("user"),setTimeout(()=>{window.location.href="/auth/login"},2e3)})};return V(()=>{const{userId:o,email:e,token:s}=t.query;if(!o||!e&&!s){m.back();return}}),(o,e)=>{const s=q,k=z,w=C,S=N,h=B;return $(),x("div",D,[a(s,{size:"24"}),i("div",L,[a(k,{"page-title":"Email Verification",email:r(u),userId:r(d),token:r(f),loading:p.value,error:_.value,onSubmit:e[0]||(e[0]=l=>y(l)),emailSubject:r(v)},null,8,["email","userId","token","loading","error","emailSubject"])]),a(h,{visible:n.value,"onUpdate:visible":e[1]||(e[1]=l=>n.value=l),header:"Email Verified",modal:"",closable:!1,class:"w-80"},{default:b(()=>[i("div",M,[a(w,{prime:"",name:"check-circle",class:"text-green-500",size:"35"}),a(S,{severity:"success"},{default:b(()=>e[2]||(e[2]=[i("p",{class:"text-center"},[g(" Your email has been verified and you are being redirected. "),i("br"),g(" Please, wait... ")],-1)])),_:1})])]),_:1},8,["visible"])])}}});export{Q as default};
