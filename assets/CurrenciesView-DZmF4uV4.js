import{s as q,a as I}from"./index-DUXjdHsK.js";import{f as A,A as N,ag as W,af as L,h as p,o as w,c as V,I as M,a,s as T,D as z,b as t,v as x,k as y,t as U,H as B,p as P,O as j,E as F,q as S}from"./index-k-7ViVgn.js";import{u as k}from"./index-HWEJQlsh.js";import{_ as R}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-B7HlNIPr.js";import{_ as O}from"./PageLoader-COy97JVn.js";import{_ as G}from"./VNavbar.vue_vue_type_script_setup_true_lang-HfkB0Wd3.js";import{s as H}from"./index-Dh3rpipz.js";import{s as Y}from"./index-DpV5ITH2.js";import{s as J}from"./index-CF-p_Sja.js";import{_ as K}from"./VFileUploader.vue_vue_type_script_setup_true_lang-C-K1qWpu.js";import"./index-DNUhPy6L.js";import"./index-BaQMZKPQ.js";import"./index-DhLjQS3e.js";import"./index-Dd8S0VpA.js";import"./helpers-BF5XYaOm.js";const Q=A({__name:"CurrencyDeleter",props:{id:{}},emits:["delete"],setup(o,{emit:r}){const c=r,u=N(),n=W(),_=L(),f=p(!1),b=p(null),l=async()=>{if(await k(`admin/currencies/${o.id}`,{loading:f,error:b,config:{router:u,method:"DELETE"}},()=>{n.add({severity:"success",summary:"Success",detail:"Currency deleted",life:3e3}),c("delete",o.id)}),b.value){n.add({severity:"error",summary:"Error",detail:b.value.message,life:6e3});return}},d=()=>{_.require({message:"Are you sure you want to proceed?",header:"Delete Currency",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{l()}})};return(C,m)=>{const e=T;return w(),V("div",null,[M(C.$slots,"default",{},()=>[a(e,{onClick:d,loading:f.value,icon:"pi pi-trash",severity:"danger",size:"small",rounded:"",outlined:""},null,8,["loading"])])])}}}),X={class:"grid gap-4"},Z={class:"flex flex-col items-center justify-center gap-1"},ee={class:"w-20 aspect-square overflow-hidden rounded-full"},le=["src"],te={class:"grid"},ae={class:"grid"},se={class:"grid"},oe={class:"grid"},ne={class:"text-mute"},re={class:"grid"},de={class:"grid"},ie={class:"grid"},ue={key:0,class:"grid"},me={class:"grid mt-3"},ce=A({__name:"CurrencyManager",props:{currency:{},buttonLabel:{},buttonIcon:{default:"pi pi-pencil"},rounded:{type:Boolean}},emits:["done"],setup(o,{emit:r}){const c=r,u=p(!1),n=N(),_=W(),f=p(!1),b=p(null),l=p(o.currency?{...o.currency}:{}),d=async()=>{var g;const m=o.currency?`admin/currencies/${(g=o.currency)==null?void 0:g.id}`:"admin/currencies",e=o.currency?"PUT":"POST";await k(m,{loading:f,error:b,config:{router:n,method:e,body:{data:l.value}}},h=>{_.add({severity:"success",summary:"Done",detail:o.currency?"Currency updated successfully":"New currency created",life:3e3}),u.value=!1;const i=o.currency?l.value:h.data;c("done",i)})},C=z(()=>!l.value.name||!l.value.abbr||!l.value.symbol||!l.value.image||!l.value.rate||!l.value.walletAddress||l.value.isAvailableForUserWithdrawal&&(l.value.withdrawalCharge===void 0||l.value.withdrawalCharge===null));return(m,e)=>{const g=T,h=P,i=J,$=Y,D=H,v=j;return w(),V("div",null,[t("div",{onClick:e[0]||(e[0]=s=>u.value=!0),class:"cursor-pointer"},[M(m.$slots,"default",{},()=>[a(g,{size:"small",icon:m.buttonIcon,rounded:m.rounded,label:m.buttonLabel},null,8,["icon","rounded","label"])])]),a(v,{visible:u.value,"onUpdate:visible":e[11]||(e[11]=s=>u.value=s),modal:"",header:m.currency?"Edit Currency":"New Currency",class:"w-80 md:w-96"},{default:x(()=>[t("div",X,[t("div",Z,[t("div",ee,[t("img",{src:l.value.image,class:"w-full h-full object-cover"},null,8,le)]),a(K,{size:"small",accept:"image/*","max-file-size":1*1024*1024,onSelect:e[1]||(e[1]=s=>l.value.image=s[0].dataUrl??""),onUpload:d,onCancel:e[2]||(e[2]=s=>{var E;return l.value.image=((E=m.currency)==null?void 0:E.image)??""}),class:"w-full",loading:f.value,disabled:f.value||C.value},null,8,["loading","disabled"])]),a(h),t("div",te,[e[12]||(e[12]=t("label",{class:"text-mute text-sm font-medium"},[y(" Name "),t("span",{class:"text-red-500"},"*")],-1)),a(i,{modelValue:l.value.name,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.name=s),modelModifiers:{trim:!0},fluid:""},null,8,["modelValue"])]),t("div",ae,[e[13]||(e[13]=t("label",{class:"text-mute text-sm font-medium"},[y(" Abbreviation "),t("span",{class:"text-red-500"},"*")],-1)),a(i,{modelValue:l.value.abbr,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.abbr=s),modelModifiers:{trim:!0},fluid:""},null,8,["modelValue"])]),t("div",se,[e[14]||(e[14]=t("label",{class:"text-mute text-sm font-medium"},[y(" Symbol "),t("span",{class:"text-red-500"},"*")],-1)),a(i,{modelValue:l.value.symbol,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.symbol=s),modelModifiers:{trim:!0},fluid:""},null,8,["modelValue"])]),t("div",oe,[e[15]||(e[15]=t("label",{class:"text-mute text-sm font-medium"},[y(" Exchange Rate (USD) "),t("span",{class:"text-red-500"},"*")],-1)),t("small",ne,"1 "+U(l.value.abbr)+" equals",1),a($,{modelValue:l.value.rate,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.rate=s),prefix:"$","max-fraction-digits":10,fluid:""},null,8,["modelValue"])]),t("div",re,[e[16]||(e[16]=t("label",{class:"text-mute text-sm font-medium"},[y(" Wallet Address "),t("span",{class:"text-red-500"},"*")],-1)),e[17]||(e[17]=t("small",{class:"text-mute"},"Wallet address for this currency for users to deposit",-1)),a(i,{modelValue:l.value.walletAddress,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.walletAddress=s),modelModifiers:{trim:!0},fluid:""},null,8,["modelValue"])]),t("div",de,[e[18]||(e[18]=t("label",{class:"text-mute text-sm font-medium"}," Wallet Address Network ",-1)),a(i,{modelValue:l.value.walletAddressNetwork,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.walletAddressNetwork=s),modelModifiers:{trim:!0},fluid:""},null,8,["modelValue"])]),t("div",ie,[e[19]||(e[19]=t("label",{class:"text-mute text-sm font-medium"}," Withdrawable",-1)),e[20]||(e[20]=t("small",{class:"text-mute"}," Choose whether users can withdraw funds with this currency ",-1)),a(D,{modelValue:l.value.isAvailableForUserWithdrawal,"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.isAvailableForUserWithdrawal=s),onLabel:"Yes",offLabel:"No"},null,8,["modelValue"])]),l.value.isAvailableForUserWithdrawal?(w(),V("div",ue,[e[21]||(e[21]=t("label",{class:"text-mute text-sm font-medium"},[y(" Withdrawal Charge (USD) "),t("span",{class:"text-red-500"},"*")],-1)),a($,{modelValue:l.value.withdrawalCharge,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.withdrawalCharge=s),prefix:"$","max-fraction-digits":2,fluid:""},null,8,["modelValue"])])):B("",!0),t("div",me,[a(g,{onClick:d,loading:f.value,disabled:f.value||C.value,label:"Submit",fluid:""},null,8,["loading","disabled"])])])]),_:1},8,["visible","header"])])}}}),ve=(o,r)=>{r.value&&(r.value=r.value.filter(c=>c.id!==o))},fe=(o,r)=>{if(!r.value)return;const c=r.value.findIndex(u=>u.id===o.id);c!==-1&&r.value.splice(c,1,o)},pe={class:"flex items-center gap-3"},be={class:"text-primary-500 font-semibold"},ge={class:"mt-2 md:h-[calc(100dvh-8.5rem)]"},ye={key:2,class:"h-full w-full overflow-y-auto rounded-lg"},we={class:"w-8 aspect-square rounded-full overflow-hidden"},_e=["src"],xe={class:"flex gap-4"},qe=A({__name:"CurrenciesView",setup(o){const r=N(),c=p(!1),u=p(null),n=p(null),_=async()=>{await k("admin/currencies",{loading:c,error:u,config:{router:r,cache:!0}},d=>{n.value=d.data})},f=d=>n.value=[d,...n.value?n.value:[]],b=d=>fe(d,n),l=d=>ve(d,n);return F(async()=>{await _()}),(d,C)=>{const m=ce,e=G,g=O,h=R,i=I,$=Q,D=q;return w(),V("div",null,[a(e,null,{right:x(()=>{var v;return[t("div",pe,[t("p",be,U((v=n.value)==null?void 0:v.length),1),a(m,{onDone:f,"button-label":"New","button-icon":"pi pi-plus"})])]}),_:1}),t("div",ge,[c.value?(w(),S(g,{key:0})):u.value?(w(),S(h,{key:1,error:u.value,request:"GET",onRetry:_,closable:""},null,8,["error"])):n.value?(w(),V("div",ye,[a(D,{value:n.value,size:"small",paginator:"",rows:10,tableStyle:"min-width: 50rem"},{default:x(()=>[a(i,null,{body:x(({data:v})=>[t("div",we,[t("img",{src:v.image,class:"w-full h-full object-cover"},null,8,_e)])]),_:1}),a(i,{field:"name",header:"Name"}),a(i,{field:"walletAddress",header:"Wallet Address"}),a(i,{header:"Exchange Rate"},{body:x(({data:v})=>[y(" $"+U(v.rate),1)]),_:1}),a(i,{header:"Actions"},{body:x(({data:v})=>[t("div",xe,[a(m,{currency:v,onDone:b,rounded:""},null,8,["currency"]),a($,{id:v.id,onDelete:l},null,8,["id"])])]),_:1})]),_:1},8,["value"])])):B("",!0)])])}}});export{qe as default};
