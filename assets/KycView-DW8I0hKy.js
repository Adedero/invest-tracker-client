import{_ as z}from"./VPaginator.vue_vue_type_script_setup_true_lang-BNbyFI4K.js";import{s as E,a as O}from"./index-B17cVOnJ.js";import{s as F}from"./index-ClWOIhms.js";import{f as G,h as n,D as y,bp as H,o as l,c,a as s,v as r,b as o,q as g,j as x,H as W,A as J,k as T,t as h,a6 as Q,a7 as X,a4 as Z,s as ee,K as te}from"./index-BeBYLbm4.js";import{_ as se}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-CC07B55Y.js";import{_ as ae}from"./PageLoader-ASoPjOmp.js";import{_ as oe}from"./VCard.vue_vue_type_script_setup_true_lang-BSr0I-Iy.js";import{s as ne}from"./index-KYbbszim.js";import{s as le}from"./index-CROb7Z2g.js";import{u as re}from"./index-CODlRzTV.js";import{t as ie}from"./helpers-BF5XYaOm.js";import"./index-CcuxF0nQ.js";import"./index-BJYIcNqT.js";import"./index-Dnf1wTNt.js";import"./index-Ca6bNHhN.js";const ce={class:"flex flex-col md:flex-row gap-2 justify-between"},ue={class:"flex items-start gap-5 flex-wrap"},me={class:"translate-y-1 flex gap-1 items-center"},de={class:"flex items-end gap-1 flex-wrap"},pe={class:"flex gap-1 flex-col"},_e={class:"mt-2 md:h-[calc(100dvh-10rem)]"},fe={key:2,class:"h-full w-full overflow-auto"},ve={key:0,class:"w-8 aspect-square overflow-hidden rounded-full"},ye=["src","alt"],ge={class:"text-xs font-semibold text-red-500"},xe={key:0},he={key:1},d=10,Ye=G({__name:"KycView",setup(be){const b=J(),p=n("Pending"),A=n(["Pending","Verified","Unverified"]),w=n(0),k=y(()=>w.value*d),S=y(()=>{const t=new URLSearchParams;return t.append("skip",k.value.toString()),t.append("limit",d.toString()),t.append("relation","user"),t.append("where",`kycStatus,${p.value.toLowerCase()}`),t.toString()}),u=n(),m=n(!1),_=n(),V=n(!1),f=n(!1),C=y(()=>u.value?f.value?u.value:u.value.filter(t=>t.user&&t.user.role!=="admin"):null),v=async()=>{await re(`admin/accounts?${S.value}`,{loading:m,error:_,config:{router:b,cache:!0}},t=>{V.value=t.data.length<d,u.value=t.data})};H(S,v,{debounce:600,maxWait:1e3,immediate:!0});async function D(t){w.value=t}function L(t){return t==="verified"?"success":t==="pending"?"warn":"danger"}return(t,a)=>{const P=le,I=ne,K=ee,M=oe,Y=ae,B=se,i=O,q=te,R=F,U=E,j=z;return l(),c("div",null,[s(M,{class:"py-2"},{default:r(()=>[o("div",ce,[o("div",ue,[a[4]||(a[4]=o("h1",{class:"text-lg font-semibold text-primary-500"},"KYC",-1)),o("div",me,[s(P,{binary:"",modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e)},null,8,["modelValue"]),a[3]||(a[3]=o("label",{class:"text-xs text-mute font-semibold"},"Show admins",-1))])]),o("div",de,[o("div",pe,[a[5]||(a[5]=o("label",{class:"text-xs text-mute font-semibold"},"Status",-1)),s(I,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),options:A.value,size:"small",class:"py-0"},null,8,["modelValue","options"])]),s(K,{onClick:v,loading:m.value,size:"small",label:"Submit"},null,8,["loading"])])])]),_:1}),o("div",_e,[m.value?(l(),g(Y,{key:0})):!m.value&&_.value?(l(),g(B,{key:1,error:_.value,request:"GET",onRetry:v,closable:""},null,8,["error"])):C.value?(l(),c("div",fe,[s(U,{value:C.value,class:"text-sm",selectionMode:"single",dataKey:"id",metaKeySelection:!1,onRowClick:a[2]||(a[2]=e=>x(b).push({name:"admin-user-kyc",params:{accountId:e.data.id}}))},{default:r(()=>[s(i,{header:"S/N",style:{"min-width":"4rem"}},{body:r(({index:e})=>[T(h(e+1+k.value)+") ",1)]),_:1}),s(i,null,{body:r(({data:e})=>{var $,N;return[($=e.user)!=null&&$.image?(l(),c("div",ve,[o("img",{src:e.user.image,alt:(N=e.user)==null?void 0:N.name,class:"w-full h-full object-cover"},null,8,ye)])):(l(),g(q,{key:1,name:"account_circle",size:"2rem",class:"text-primary-500"}))]}),_:1}),s(i,{field:"user.name",header:"Name"},{body:r(({data:e})=>[o("p",null,[T(h(e.user.name)+" ",1),Q(o("span",ge," admin ",512),[[X,e.user.role==="admin"]])])]),_:1}),s(i,{header:"KYC Status"},{body:r(({data:e})=>[s(R,{class:"text-xs font-semibold",severity:L(e.kycStatus),value:x(ie)(e.kycStatus)},null,8,["severity","value"])]),_:1}),s(i,{field:"kycIdType",header:"ID Type"}),s(i,{header:"Submitted On"},{body:r(({data:e})=>[e.kycSubmittedAt?(l(),c("p",xe,h(x(Z)(new Date(e.kycSubmittedAt),"ddd, DD MMM, YYYY hh:mm aa")),1)):(l(),c("p",he,"Not submitted"))]),_:1})]),_:1},8,["value"]),s(j,{allLoaded:V.value,rows:d,onPrev:D,onNext:D},null,8,["allLoaded"])])):W("",!0)])])}}});export{Ye as default};
