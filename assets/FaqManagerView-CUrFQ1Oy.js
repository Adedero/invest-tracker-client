import{s as $}from"./index-B2JySSRE.js";import{s as B}from"./index-DMxJWgcx.js";import{_ as E}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-BkdBNGI_.js";import{_ as F}from"./PageLoader-62ICEvpm.js";import{_ as N}from"./VCard.vue_vue_type_script_setup_true_lang-G04ysE6h.js";import{f as A,ag as D,h as l,C as I,D as U,E as P,o as n,c as b,a as i,v as R,b as s,q as V,k as f,H as z,L,A as Q,t as j,s as G}from"./index-rkqDWn-K.js";import{u as q}from"./index-BJLvgVPt.js";import{s as H}from"./helpers-BF5XYaOm.js";import"./index-BZ2gPtDN.js";import"./index-Bv-llqAV.js";const O={class:"flex items-center gap-2 justify-between"},J={class:"font-semibold text-primary-500 text-lg"},K={class:"mt-2 md:h-[calc(100dvh-9rem)]"},W={key:2,class:"h-full w-full overflow-y-auto"},X={class:"grid md:grid-cols-2 gap-4"},Y={class:"grid"},Z={class:"grid"},ee={class:"md:col-span-2"},ce=A({__name:"FaqManagerView",setup(te){var y;const w=L(),r=Q(),v=D(),u=(y=w.params.faqId)==null?void 0:y.toString(),_=l(!1),d=l(null),e=l({});I(()=>e.value.title,()=>{e.value.slug=H(e.value.title)});const k=U(()=>{const{title:a,slug:t,description:p}=e.value;return!a||!t||!p}),g=async()=>{await q(`admin/faqs/${u}`,{loading:_,error:d,config:{router:r,cache:!0}},a=>{e.value=a.data})},m=l(!1),c=l(null),T=async()=>{const a=e.value.id?`admin/faqs/${e.value.id}`:"admin/faqs",t=e.value.id?"PUT":"POST";if(await q(a,{loading:m,error:c,config:{router:r,method:t,body:{data:e.value}}},()=>{if(!u){r.push({name:"admin-faqs"});return}v.add({severity:"success",summary:"Success",detail:"FAQ item updated successfully",life:3e3})}),c.value){v.add({severity:"error",summary:"Error",detail:c.value.message,life:6e3});return}};return P(async()=>{if(u){await g();return}}),(a,t)=>{const p=G,S=N,h=F,C=E,x=B,M=$;return n(),b("div",null,[i(S,{class:"py-2"},{default:R(()=>[s("div",O,[s("p",J,j(e.value.title??"New FAQ"),1),i(p,{onClick:T,label:"Save",icon:"pi pi-save",size:"small",loading:m.value,disabled:m.value||k.value},null,8,["loading","disabled"])])]),_:1}),s("div",K,[_.value?(n(),V(h,{key:0})):d.value?(n(),V(C,{key:1,error:d.value,request:"GET",onRetry:g,closable:""},null,8,["error"])):e.value?(n(),b("div",W,[s("div",X,[s("div",Y,[t[3]||(t[3]=s("label",{class:"text-mute text-sm font-semibold"},[f(" Title "),s("span",{class:"text-red-500"},"*")],-1)),i(x,{modelValue:e.value.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.title=o),modelModifiers:{trim:!0},fluid:""},null,8,["modelValue"])]),s("div",Z,[t[4]||(t[4]=s("label",{class:"text-mute text-sm font-semibold"},[f(" Slug "),s("span",{class:"text-red-500"},"*")],-1)),i(x,{modelValue:e.value.slug,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.slug=o),modelModifiers:{trim:!0},fluid:""},null,8,["modelValue"])]),s("div",ee,[t[5]||(t[5]=s("label",{class:"text-mute text-sm font-semibold"},[f(" Description "),s("span",{class:"text-red-500"},"*")],-1)),i(M,{modelValue:e.value.description,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.description=o),modelModifiers:{trim:!0},fluid:"",rows:"14","auto-resize":""},null,8,["modelValue"])])])])):z("",!0)])])}}});export{ce as default};
