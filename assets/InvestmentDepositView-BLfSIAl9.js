import{s as ce}from"./index-wUa9exdV.js";import{P as de,ah as j,ai as S,aj as pe,ak as me,al as Y,am as ve,an as fe,ao as ge,ap as he,aq as be,ar as ye,as as we,at as ke,au as xe,av as Le,r as Q,aw as Ce,o as a,q as v,v as p,a as i,a6 as _e,c as f,I as W,R as F,H as u,ad as Re,S as Ee,f as De,u as Se,af as ze,h as c,D as J,E as Te,j as q,b as s,t as L,k as d,A as Oe,s as Ie,O as Be,p as Ke,K as Pe,B as Ae,L as Ve}from"./index-k-7ViVgn.js";import{s as He}from"./index-CF-p_Sja.js";import{s as je,a as Fe}from"./index-BNyj08WI.js";import{s as qe}from"./index-DpV5ITH2.js";import{_ as Ue}from"./SvgIcon.vue_vue_type_script_setup_true_lang-phISCwZG.js";import{s as Ne}from"./index-Cfn63MK0.js";import{_ as Me}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-B7HlNIPr.js";import{_ as Ze}from"./PageLoader-COy97JVn.js";import{u as U}from"./index-HWEJQlsh.js";import"./index-DhLjQS3e.js";import"./index-BaQMZKPQ.js";var $e=function(e){var o=e.dt;return`
.p-popover {
    margin-block-start: `.concat(o("popover.gutter"),`;
    background: `).concat(o("popover.background"),`;
    color: `).concat(o("popover.color"),`;
    border: 1px solid `).concat(o("popover.border.color"),`;
    border-radius: `).concat(o("popover.border.radius"),`;
    box-shadow: `).concat(o("popover.shadow"),`;
}

.p-popover-content {
    padding: `).concat(o("popover.content.padding"),`;
}

.p-popover-flipped {
    margin-block-start: calc(`).concat(o("popover.gutter"),` * -1);
    margin-block-end: `).concat(o("popover.gutter"),`;
}

.p-popover-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-popover-leave-to {
    opacity: 0;
}

.p-popover-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1), opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-popover-leave-active {
    transition: opacity 0.1s linear;
}

.p-popover:after,
.p-popover:before {
    bottom: 100%;
    left: calc(`).concat(o("popover.arrow.offset")," + ").concat(o("popover.arrow.left"),`);
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.p-popover:after {
    border-width: calc(`).concat(o("popover.gutter"),` - 2px);
    margin-left: calc(-1 * (`).concat(o("popover.gutter"),` - 2px));
    border-style: solid;
    border-color: transparent;
    border-bottom-color: `).concat(o("popover.background"),`;
}

.p-popover:before {
    border-width: `).concat(o("popover.gutter"),`;
    margin-left: calc(-1 * `).concat(o("popover.gutter"),`);
    border-style: solid;
    border-color: transparent;
    border-bottom-color: `).concat(o("popover.border.color"),`;
}

.p-popover-flipped:after,
.p-popover-flipped:before {
    bottom: auto;
    top: 100%;
}

.p-popover.p-popover-flipped:after {
    border-bottom-color: transparent;
    border-top-color: `).concat(o("popover.background"),`;
}

.p-popover.p-popover-flipped:before {
    border-bottom-color: transparent;
    border-top-color: `).concat(o("popover.border.color"),`;
}
`)},Ge={root:"p-popover p-component",content:"p-popover-content"},Ye=de.extend({name:"popover",theme:$e,classes:Ge}),We={name:"BasePopover",extends:Ee,props:{dismissable:{type:Boolean,default:!0},appendTo:{type:[String,Object],default:"body"},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},breakpoints:{type:Object,default:null},closeOnEscape:{type:Boolean,default:!0}},style:Ye,provide:function(){return{$pcPopover:this,$parentInstance:this}}},X={name:"Popover",extends:We,inheritAttrs:!1,emits:["show","hide"],data:function(){return{visible:!1}},watch:{dismissable:{immediate:!0,handler:function(e){e?this.bindOutsideClickListener():this.unbindOutsideClickListener()}}},selfClick:!1,target:null,eventTarget:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,styleElement:null,overlayEventListener:null,documentKeydownListener:null,beforeUnmount:function(){this.dismissable&&this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.destroyStyle(),this.unbindResizeListener(),this.target=null,this.container&&this.autoZIndex&&j.clear(this.container),this.overlayEventListener&&(S.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null),this.container=null},mounted:function(){this.breakpoints&&this.createStyle()},methods:{toggle:function(e,o){this.visible?this.hide():this.show(e,o)},show:function(e,o){this.visible=!0,this.eventTarget=e.currentTarget,this.target=o||e.currentTarget},hide:function(){this.visible=!1},onContentClick:function(){this.selfClick=!0},onEnter:function(e){var o=this;pe(e,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),this.dismissable&&this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.autoZIndex&&j.set("overlay",e,this.baseZIndex+this.$primevue.config.zIndex.overlay),this.overlayEventListener=function(m){o.container.contains(m.target)&&(o.selfClick=!0)},this.focus(),S.on("overlay-click",this.overlayEventListener),this.$emit("show"),this.closeOnEscape&&this.bindDocumentKeyDownListener()},onLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.unbindDocumentKeyDownListener(),S.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null,this.$emit("hide")},onAfterLeave:function(e){this.autoZIndex&&j.clear(e)},alignOverlay:function(){me(this.container,this.target,!1);var e=Y(this.container),o=Y(this.target),m=0;e.left<o.left&&(m=o.left-e.left),this.container.style.setProperty(ve("popover.arrow.left").name,"".concat(m,"px")),e.top<o.top&&(this.container.setAttribute("data-p-popover-flipped","true"),!this.isUnstyled&&fe(this.container,"p-popover-flipped"))},onContentKeydown:function(e){e.code==="Escape"&&this.closeOnEscape&&(this.hide(),ge(this.target))},onButtonKeydown:function(e){switch(e.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":e.preventDefault()}},focus:function(){var e=this.container.querySelector("[autofocus]");e&&e.focus()},onKeyDown:function(e){e.code==="Escape"&&this.closeOnEscape&&(this.visible=!1)},bindDocumentKeyDownListener:function(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener:function(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},bindOutsideClickListener:function(){var e=this;!this.outsideClickListener&&he()&&(this.outsideClickListener=function(o){e.visible&&!e.selfClick&&!e.isTargetClicked(o)&&(e.visible=!1),e.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new be(this.target,function(){e.visible&&(e.visible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.visible&&!ye()&&(e.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isTargetClicked:function(e){return this.eventTarget&&(this.eventTarget===e.target||this.eventTarget.contains(e.target))},containerRef:function(e){this.container=e},createStyle:function(){if(!this.styleElement&&!this.isUnstyled){var e;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",we(this.styleElement,"nonce",(e=this.$primevue)===null||e===void 0||(e=e.config)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce),document.head.appendChild(this.styleElement);var o="";for(var m in this.breakpoints)o+=`
                        @media screen and (max-width: `.concat(m,`) {
                            .p-popover[`).concat(this.$attrSelector,`] {
                                width: `).concat(this.breakpoints[m],` !important;
                            }
                        }
                    `);this.styleElement.innerHTML=o}},destroyStyle:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},onOverlayClick:function(e){S.emit("overlay-click",{originalEvent:e,target:this.target})}},directives:{focustrap:ke,ripple:xe},components:{Portal:Le}},Je=["aria-modal"];function Qe(n,e,o,m,E,r){var b=Q("Portal"),l=Ce("focustrap");return a(),v(b,{appendTo:n.appendTo},{default:p(function(){return[i(Re,F({name:"p-popover",onEnter:r.onEnter,onLeave:r.onLeave,onAfterLeave:r.onAfterLeave},n.ptm("transition")),{default:p(function(){return[E.visible?_e((a(),f("div",F({key:0,ref:r.containerRef,role:"dialog","aria-modal":E.visible,onClick:e[3]||(e[3]=function(){return r.onOverlayClick&&r.onOverlayClick.apply(r,arguments)}),class:n.cx("root")},n.ptmi("root")),[n.$slots.container?W(n.$slots,"container",{key:0,closeCallback:r.hide,keydownCallback:function(C){return r.onButtonKeydown(C)}}):(a(),f("div",F({key:1,class:n.cx("content"),onClick:e[0]||(e[0]=function(){return r.onContentClick&&r.onContentClick.apply(r,arguments)}),onMousedown:e[1]||(e[1]=function(){return r.onContentClick&&r.onContentClick.apply(r,arguments)}),onKeydown:e[2]||(e[2]=function(){return r.onContentKeydown&&r.onContentKeydown.apply(r,arguments)})},n.ptm("content")),[W(n.$slots,"default")],16))],16,Je)),[[l]]):u("",!0)]}),_:3},16,["onEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])}X.render=Qe;const Xe=async n=>{var e;return await U(`user/investment-plans/${(e=n.config.router)==null?void 0:e.currentRoute.value.params.investmentPlanSlug}?key=slug`,{loading:n.loading,error:n.error,config:n.config},o=>{n.plan.value=o.data})},et=async n=>await U(`/user/accounts/${n.userId}?key=userId&field=walletBalance`,{loading:n.loading,error:n.error,config:n.config},e=>{n.walletBalance.value=e.data.walletBalance}),tt=(n,e)=>{n.require({message:"Proceed with this investment?",header:"Confirmation",icon:"pi pi-exclamation-circle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Proceed"},accept:()=>{e()}})},nt="/assets/investment-success-BlSgDJv5.jpg",ot={class:"h-full"},st={key:0,class:"w-full flex flex-col gap-3"},it={class:"rounded-xl overflow-hidden h-60"},rt=["src"],lt={key:1,class:"w-full flex-center"},at={key:2,class:"grid gap-2 md:grid-cols-5 lg:grid-cols-3"},ut={class:"md:col-span-2 lg:col-span-1"},ct={class:"v-card grid"},dt={key:0,class:"mt-2 flex flex-col gap-2 items-center justify-center"},pt={class:"uppercase text-lg text-center font-semibold"},mt={key:1,class:"w-full"},vt={class:"grid grid-cols-3 text-sm"},ft={class:"col-span-2 flex items-center gap-1 text-mute"},gt={class:"text-right font-semibold"},ht={class:"grid grid-cols-3 text-sm"},bt={class:"col-span-2 flex items-center gap-1 text-mute"},yt={class:"text-right font-semibold"},wt={class:"grid grid-cols-3 text-sm"},kt={class:"col-span-2 flex items-center gap-1 text-mute"},xt={class:"text-right font-semibold"},Lt={class:"text-xs text-mute"},Ct={class:"md:col-span-3 lg:col-span-2"},_t={class:"v-card"},Rt={class:"flex gap-3"},Et={class:"flex-grow flex items-center gap-x-2 justify-between flex-wrap"},Dt={key:0},St={key:2,class:"text-xl md:text-2xl font-semibold text-green-600"},zt={key:1,class:"grid gap-2"},Tt={class:"grid gap-2"},Ot={class:"font-semibold"},It={class:"mt-2 grid gap-1"},Bt={class:"flex items-center justify-between gap-1"},Kt={class:"flex items-center"},Pt={class:"text-sm"},At={class:"mt-2 text-xs"},Wt=De({__name:"InvestmentDepositView",setup(n){const e=Ve(),o=Oe(),m=Se(),E=ze(),r=c(null),b=c(null),l=J(()=>{var g;return(g=b.value)==null?void 0:g.tiers.find(t=>t.name.toLowerCase()===e.params.investmentPlanTier.toString().toLowerCase())}),z=c(!1),C=c(null),T=Xe({plan:b,loading:z,error:C,config:{router:o,cache:!0}}),N=c(!1),O=c(null),ee=et({walletBalance:r,userId:m.user.id,loading:N,error:O,config:{router:o}}),w=c(),k=c(!0),I=c(!1),B=J(()=>{if(!l.value)return"0";const{duration:g,expectedReturnRate:t}=l.value,V=t/100/g;return k.value?`${(((1+V)**g-1)*100).toFixed(1)}%`:`${t}%`}),K=c(!1),P=c(null),A=c(null),te=async()=>{var t;if(!b.value||!w.value||!l.value)return;const g={userId:m.user.id,initialDeposit:w.value.toFixed(2),currentCompoundedAmount:k.value?w.value.toFixed(2):null,autocompounded:k.value,status:"open",investmentName:b.value.name,investmentTier:l.value.name,minimumDeposit:l.value.minimumDeposit.toFixed(2),duration:(t=l.value)==null?void 0:t.duration,daysCompleted:0,terminationFee:l.value.terminationFee,expectedReturnRate:l.value.expectedReturnRate,autocompoundedReturnRate:k.value?B.value.split("%")[0]:null,expectedTotalReturns:(w.value*(1+(k.value?Number(B.value.split("%")[0]):l.value.expectedReturnRate)/100)).toFixed(2),currentTotalReturns:0};await U("user/investments",{loading:K,error:P,config:{method:"POST",body:{data:g}}},y=>{A.value=y.data,I.value=!0})},ne=()=>{tt(E,async()=>{await te()})},M=c();return Te(async()=>{await Promise.all([T,ee])}),(g,t)=>{const y=Ie,V=Be,oe=Ze,H=Me,se=Ne,_=Ue,x=Ke,R=Pe,D=Q("RouterLink"),Z=Fe,ie=qe,$=je,re=Ae,le=He,ae=X,ue=ce;return a(),f("div",ot,[i(V,{visible:I.value,"onUpdate:visible":t[1]||(t[1]=h=>I.value=h),modal:"",header:"Done!",closable:!1,class:"dark:bg-slate-900",style:{width:"22rem"}},{default:p(()=>[A.value?(a(),f("div",st,[s("div",it,[s("img",{src:q(nt),class:"w-full h-full object-contain"},null,8,rt)]),t[6]||(t[6]=s("p",{class:"text-center"},[d(" Congratulations! "),s("br"),d(" You can now expect daily returns on your new investment. ")],-1)),i(y,{onClick:t[0]||(t[0]=h=>g.$router.push({name:"investment",params:{investmentId:A.value.id}})),fluid:"",label:"Continue"})])):u("",!0)]),_:1},8,["visible"]),z.value?(a(),v(oe,{key:0})):C.value?(a(),f("div",lt,[i(H,{error:C.value,request:"GET",onRetry:q(T)},null,8,["error","onRetry"])])):b.value?(a(),f("div",at,[s("div",ut,[s("div",ct,[i(se,{severity:"secondary",value:b.value.name,class:"dark:bg-slate-800"},null,8,["value"]),l.value?(a(),f("div",dt,[s("p",pt,L(l.value.name),1),l.value.name.toLowerCase()==="basic"?(a(),v(_,{key:0,name:"plant",size:"100"})):u("",!0),l.value.name.toLowerCase()==="bronze"?(a(),v(_,{key:1,name:"bronze-medal",size:"100"})):u("",!0),l.value.name.toLowerCase()==="silver"?(a(),v(_,{key:2,name:"silver-medal",size:"100"})):u("",!0),l.value.name.toLowerCase()==="gold"?(a(),v(_,{key:3,name:"gold-medal",size:"100"})):u("",!0),l.value.name.toLowerCase()==="platinum"?(a(),v(_,{key:4,name:"platinum",size:"100"})):u("",!0)])):u("",!0),i(x),l.value?(a(),f("div",mt,[s("div",vt,[s("p",ft,[i(R,{prime:"",name:"money-bill"}),t[7]||(t[7]=d(" Minimum Amount "))]),s("p",gt," $"+L(l.value.minimumDeposit.toLocaleString()),1)]),i(x),s("div",ht,[s("p",bt,[i(R,{prime:"",name:"calendar"}),t[8]||(t[8]=d(" Term "))]),s("p",yt,L(l.value.duration)+" days",1)]),i(x),s("div",wt,[s("p",kt,[i(R,{prime:"",name:"replay"}),t[9]||(t[9]=d(" Expected Return "))]),s("p",xt,L(l.value.expectedReturnRate)+"%",1)]),i(x),s("p",Lt,[i(R,{prime:"",name:"info-circle",class:"float-left mr-1"}),t[12]||(t[12]=d(" By proceeding with this investment, you know and acknowledge the ")),i(D,{to:{name:"risk-acknowledgment"},class:"text-primary-500 font-semibold hover:underline"},{default:p(()=>t[10]||(t[10]=[d("risks of investment")])),_:1}),t[13]||(t[13]=d(" and agree to our ")),i(D,{target:"_blank",to:{name:"terms-of-use"},class:"text-primary-500 font-semibold hover:underline"},{default:p(()=>t[11]||(t[11]=[d(" terms of use "),s("span",{class:"pi pi-external-link",style:{"font-size":"0.6rem","font-weight":"700"}},null,-1)])),_:1}),t[14]||(t[14]=d(". "))])])):u("",!0)]),i(D,{to:{name:"select-investment"}},{default:p(()=>[i(y,{severity:"secondary",fluid:"",label:"Back to investment plans",class:"mt-4 border-transparent bg-slate-300 dark:bg-slate-700"})]),_:1})]),s("div",Ct,[s("div",_t,[s("div",Rt,[i(R,{prime:"",name:"wallet",class:"bg-blue-400 dark:bg-blue-500/30 rounded-full p-2 text-white"}),s("div",Et,[t[16]||(t[16]=s("p",{class:"text-mute text-sm md:text-base"},"Available Balance",-1)),N.value?(a(),f("p",Dt,t[15]||(t[15]=[s("span",{class:"pi pi-spinner text-primary-500 animate-spin",style:{"font-weight":"700","font-size":"1.5rem"}},null,-1)]))):O.value?(a(),v(H,{key:1,error:O.value,request:"GET",onRetry:q(T)},null,8,["error","onRetry"])):r.value!==null&&r.value!==void 0?(a(),f("p",St," $"+L(r.value.toLocaleString()),1)):u("",!0)])]),i(x),P.value?(a(),v(H,{key:0,class:"mb-2",error:P.value},null,8,["error"])):u("",!0),r.value!==null&&r.value!==void 0&&l.value?(a(),f("div",zt,[s("div",Tt,[t[20]||(t[20]=s("label",{class:"text-sm text-mute font-semibold"},"Enter amount",-1)),i($,{class:"w-full *:dark:bg-slate-800"},{default:p(()=>[i(Z,null,{default:p(()=>t[17]||(t[17]=[d("$")])),_:1}),i(ie,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=h=>w.value=h),min:l.value.minimumDeposit,max:r.value,minFractionDigits:0,maxFractionDigits:2,placeholder:"00.00",class:"w-full *:dark:bg-slate-800"},null,8,["modelValue","min","max"])]),_:1}),s("small",null,[t[18]||(t[18]=d("Minimum deposit ")),s("span",Ot,"$"+L(l.value.minimumDeposit.toLocaleString()),1)]),r.value<l.value.minimumDeposit?(a(),v(re,{key:0,severity:"error",size:"small"},{default:p(()=>t[19]||(t[19]=[d(" You do not have enough funds to complete this investment. ")])),_:1})):u("",!0)]),s("div",It,[t[22]||(t[22]=s("label",{class:"text-mute text-sm font-semibold"},"Expected Return Rate",-1)),l.value?(a(),v($,{key:0,class:"w-full *:dark:bg-slate-800"},{default:p(()=>[i(Z,null,{default:p(()=>t[21]||(t[21]=[s("span",{class:"pi pi-percentage"},null,-1)])),_:1}),i(le,{value:B.value,readOnly:"",class:"w-full *:dark:bg-slate-800"},null,8,["value"])]),_:1})):u("",!0)]),s("div",Bt,[s("div",Kt,[t[25]||(t[25]=s("label",{class:"text-mute text-sm font-semibold"},"Autocompound Investment",-1)),i(y,{onClick:t[3]||(t[3]=h=>{var G;(G=M.value)==null||G.toggle(h)}),size:"small",text:"",icon:"pi pi-question-circle",rounded:""}),i(ae,{ref_key:"op",ref:M,class:"max-w-60"},{default:p(()=>[s("div",Pt,[t[24]||(t[24]=s("p",{class:"text-mute font-medium"},"Autocompounded Investments",-1)),s("div",At,[t[23]||(t[23]=s("p",null," Autocompounded investments promise higher returns but profits are not withdrawable until the end of the investment term or when the investment is terminated. ",-1)),i(D,{to:{name:"faq-item",params:{slug:"auto-compounding"}},target:"_blank"},{default:p(()=>[i(y,{size:"small",class:"mt-2 text-sm",icon:"pi pi-external-link","icon-pos":"right",label:"See More",fluid:""})]),_:1})])])]),_:1},512)]),i(ue,{modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=h=>k.value=h)},null,8,["modelValue"])])])):u("",!0),i(x),i(y,{onClick:t[5]||(t[5]=h=>ne()),fluid:"",label:"Proceed",icon:"pi pi-check-circle",loading:K.value,disabled:K.value||!w.value||!r.value||!l.value||r.value<l.value.minimumDeposit},null,8,["loading","disabled"])])])])):u("",!0)])}}});export{Wt as default};
