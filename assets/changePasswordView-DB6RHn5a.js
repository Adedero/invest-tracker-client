import{a as B,b as N,c as M,d as U,s as j}from"./index-D8OBBn0D.js";import{s as E}from"./index-BrlM22-N.js";import{f as L,A as R,u as T,h as i,r as A,o as d,c as g,a as e,v as a,q as D,H as k,k as q,b as t,a6 as H,a7 as I,B as Y,s as z,_ as F}from"./index-CPQeoj50.js";import{_ as G}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-IRMrSdrb.js";import{u as J}from"./index-p30fdSMQ.js";import{l as K}from"./helpers-BF5XYaOm.js";import{_ as O}from"./VNavbar.vue_vue_type_script_setup_true_lang-aTOVxp6y.js";import"./index-DrOr8a5z.js";import"./index-57mWwkce.js";import"./index-CyFKcpBt.js";const Q={class:"v-card h-full w-full flex items-center justify-center"},W={key:1,class:"my-2 flex-col-center gap-3"},X={class:"flex flex-col"},Z={class:"grid gap-1"},ee={class:"flex pt-6 justify-end"},se={class:"flex flex-col"},oe={class:"grid gap-1"},te={class:"flex pt-6 justify-between"},le={class:"flex flex-col"},ae={class:"grid gap-1"},ne={class:"text-red-500"},re={class:"flex pt-6 justify-between"},ie=L({__name:"PasswordChanger",props:{role:{}},emits:["change"],setup(b,{emit:h}){const c=R(),u=T(),s=i({p1:"",p2:"",p3:""}),p=i(!1),m=i(null),w=i(!1),x=async()=>{await J(`${b.role}/change-password/${u.user.id}`,{loading:p,error:m,config:{router:c,method:"PUT",body:{data:s.value}}},()=>{w.value=!0,localStorage.removeItem("user"),setTimeout(()=>{K()},2e3)})};return(me,o)=>{const f=B,y=N,$=G,C=Y,n=z,V=A("RouterLink"),_=E,v=M,P=U,S=j;return d(),g("div",Q,[e(S,{value:"1",linear:"",class:"shadow-md border dark:border-slate-600 rounded-xl p-3 bg-white dark:bg-slate-900 md:w-96"},{default:a(()=>[e(y,null,{default:a(()=>[e(f,{value:"1"}),e(f,{value:"2"}),e(f,{value:"3"})]),_:1}),m.value?(d(),D($,{key:0,error:m.value,class:"my-2",closable:""},null,8,["error"])):k("",!0),w.value?(d(),g("div",W,[e(C,{severity:"success"},{default:a(()=>o[3]||(o[3]=[q(" Your password has been changed. Please, log in to continue ")])),_:1}),e(V,{to:{name:"login"},class:"w-full"},{default:a(()=>[e(n,{label:"Log in",fluid:"",icon:"pi pi-sign-in","icon-pos":"right"})]),_:1})])):k("",!0),e(P,null,{default:a(()=>[e(v,{value:"1",class:"dark:bg-slate-900"},{default:a(({activateCallback:r})=>[t("div",X,[t("div",Z,[o[4]||(o[4]=t("label",{for:"p1",class:"text-mute font-semibold text-sm"},"Enter your old password",-1)),e(_,{modelValue:s.value.p1,"onUpdate:modelValue":o[0]||(o[0]=l=>s.value.p1=l),modelModifiers:{trim:!0},fluid:"","toggle-mask":"",feedback:!1,"input-class":"dark:bg-slate-800"},null,8,["modelValue"])])]),t("div",ee,[e(n,{disabled:!s.value.p1,label:"Next",icon:"pi pi-arrow-right",iconPos:"right",onClick:l=>r("2")},null,8,["disabled","onClick"])])]),_:1}),e(v,{value:"2",class:"dark:bg-slate-900"},{default:a(({activateCallback:r})=>[t("div",se,[t("div",oe,[o[5]||(o[5]=t("label",{for:"p1",class:"text-mute font-semibold text-sm"},"Enter your new password",-1)),o[6]||(o[6]=t("small",{class:"text-primary-500"},"Password must have at least 8 characters",-1)),e(_,{modelValue:s.value.p2,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value.p2=l),modelModifiers:{trim:!0},fluid:"","toggle-mask":"",feedback:!1,"input-class":"dark:bg-slate-800"},null,8,["modelValue"])])]),t("div",te,[e(n,{label:"Back",severity:"secondary",icon:"pi pi-arrow-left",onClick:l=>r("1")},null,8,["onClick"]),e(n,{disabled:!s.value.p2||s.value.p2.length<8,label:"Next",icon:"pi pi-arrow-right",iconPos:"right",onClick:l=>r("3")},null,8,["disabled","onClick"])])]),_:1}),e(v,{value:"3",class:"dark:bg-slate-900"},{default:a(({activateCallback:r})=>[t("div",le,[t("div",ae,[o[7]||(o[7]=t("label",{for:"p1",class:"text-mute font-semibold text-sm"},"Confirm your new password",-1)),e(_,{modelValue:s.value.p3,"onUpdate:modelValue":o[2]||(o[2]=l=>s.value.p3=l),modelModifiers:{trim:!0},fluid:"","toggle-mask":"",feedback:!1,"input-class":"dark:bg-slate-800"},null,8,["modelValue"]),H(t("small",ne,"Password does not match your new password",512),[[I,s.value.p3&&s.value.p3!==s.value.p2]])])]),t("div",re,[e(n,{label:"Back",severity:"secondary",icon:"pi pi-arrow-left",onClick:l=>r("2")},null,8,["onClick"]),e(n,{loading:p.value,disabled:p.value||!s.value.p1||s.value.p2.length<8||s.value.p3!==s.value.p2,label:"Submit",icon:"pi pi-check","icon-pos":"right",onClick:x},null,8,["loading","disabled"])])]),_:1})]),_:1})]),_:1})])}}}),de={},ce={class:"h-full"},ue={class:"mt-2 overflow-y-auto md:h-[calc(100dvh-8.5rem)]"};function pe(b,h){const c=O,u=ie;return d(),g("div",ce,[e(c),t("div",ue,[e(u,{role:"user"})])])}const $e=F(de,[["render",pe]]);export{$e as default};
