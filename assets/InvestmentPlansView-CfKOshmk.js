import{_ as q}from"./VCard.vue_vue_type_script_setup_true_lang-BSr0I-Iy.js";import{f as E,A as $,ag as z,h as m,af as A,o as n,c as a,b as e,I as L,a as d,s as I,E as S,v as k,q as y,F as b,i as x,H as D,t as C,j as P}from"./index-BeBYLbm4.js";import{u as B}from"./index-CODlRzTV.js";import{_ as T}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-CC07B55Y.js";import{_ as F}from"./PageLoader-ASoPjOmp.js";import{_ as M}from"./VNavbar.vue_vue_type_script_setup_true_lang-CqpLz49R.js";import"./helpers-BF5XYaOm.js";const R=E({__name:"InvestmentPlanDeleter",props:{id:{}},emits:["delete"],setup(v,{emit:r}){const u=r,i=$(),t=z(),_=m(!1),c=m(null),o=async()=>{if(await B(`admin/investment-plans/${v.id}`,{loading:_,error:c,config:{router:i,method:"DELETE"}},()=>{t.add({severity:"success",summary:"Success",detail:"Investment plan deleted",life:3e3}),u("delete",v.id)}),c.value){t.add({severity:"error",summary:"Error",detail:c.value.message,life:6e3});return}},l=A(),p=()=>{l.require({message:"Are you sure you want to proceed?",header:"Delete Investment Plan",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{o()}})};return(g,w)=>{const h=I;return n(),a("div",null,[e("div",{onClick:p},[L(g.$slots,"default",{},()=>[d(h,{label:"Delete",size:"small",icon:"pi pi-trash",severity:"danger",fluid:"",outlined:""})])])])}}}),G={class:"flex items-center gap-3"},H={class:"text-primary-500 font-semibold"},J={class:"mt-2 md:h-[calc(100dvh-9rem)]"},K={key:2,class:"h-full w-full overflow-y-auto"},O={class:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-3"},Q={class:"grid"},U={class:"h-36 w-full overflow-hidden rounded-lg"},W=["src"],X={class:"mt-2 flex items-center gap-1 justify-center flex-wrap"},Y={class:"font-medium"},Z={key:0,class:"w-1 aspect-square bg-black rounded-full"},ee={class:"mt-2 grid grid-cols-2 gap-2 w-full"},ie=E({__name:"InvestmentPlansView",setup(v){const r=$(),u=m(!1),i=m(null),t=m(null),_=async()=>{await B("admin/investment-plans",{loading:u,error:i,config:{router:r,cache:!0}},o=>{t.value=o.data})},c=o=>{t.value&&(t.value=t.value.filter(l=>l.id!==o))};return S(async()=>{await _()}),(o,l)=>{const p=I,g=M,w=F,h=T,V=R,N=q;return n(),a("div",null,[d(g,null,{right:k(()=>{var s;return[e("div",G,[e("p",H,C((s=t.value)==null?void 0:s.length),1),d(p,{onClick:l[0]||(l[0]=f=>P(r).push({name:"admin-investment-plan-manager"})),label:"New",icon:"pi pi-plus",size:"small"})])]}),_:1}),e("div",J,[u.value?(n(),y(w,{key:0})):i.value?(n(),y(h,{key:1,error:i.value,request:"GET",onRetry:_,closable:""},null,8,["error"])):t.value?(n(),a("div",K,[e("div",O,[(n(!0),a(b,null,x(t.value,s=>(n(),y(N,{key:s.id,header:s.name},{default:k(()=>[e("div",Q,[e("div",U,[e("img",{src:s.image,class:"w-full h-full object-cover"},null,8,W)]),e("div",X,[(n(!0),a(b,null,x(s.tiers,(f,j)=>(n(),a("p",{key:f.name,class:"text-sm flex items-center gap-1"},[e("span",Y,C(f.name),1),j<s.tiers.length-1?(n(),a("span",Z)):D("",!0)]))),128))]),e("div",ee,[d(p,{onClick:f=>P(r).push({name:"admin-investment-plan-manager",params:{investmentPlanId:s.id}}),label:"Edit",icon:"pi pi-file-edit",size:"small",fluid:""},null,8,["onClick"]),d(V,{id:s.id,onDelete:c},null,8,["id"])])])]),_:2},1032,["header"]))),128))])])):D("",!0)])])}}});export{ie as default};
