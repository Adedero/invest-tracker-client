import{_ as T}from"./VPaginator.vue_vue_type_script_setup_true_lang-BNbyFI4K.js";import{s as A,a as I}from"./index-B17cVOnJ.js";import{s as N}from"./index-ClWOIhms.js";import{f as z,u as U,h as i,D as h,C as Y,o as B,c as M,b as o,a as s,v as n,s as P,O as E,A as F,k as m,t as r,j,a4 as H}from"./index-BeBYLbm4.js";import{s as K}from"./index-KYbbszim.js";import{u as O}from"./index-CODlRzTV.js";import"./index-CcuxF0nQ.js";import"./index-BJYIcNqT.js";import"./index-Dnf1wTNt.js";import"./index-Ca6bNHhN.js";import"./index-CROb7Z2g.js";const q={class:"v-card p-3"},G={class:"flex-center-between"},J={class:"hidden md:flex items-end gap-2 justify-end"},Q={class:"grid gap-1"},W={class:"flex flex-col gap-2"},X={class:"grid gap-1"},Z={class:"grid grid-cols-2 gap-2 mt-2"},ee={class:"mt-2 h-[calc(100dvh-10rem)] md:h-[calc(100dvh-11rem)]"},te={class:"w-full h-full overflow-y-auto rounded-lg"},f=20,ve=z({__name:"InvestmentHistoryView",setup(se){const x=F(),$=U(),u=i(!1),g=i(["All","Open","Paused","Closed","Terminated"]),d=i(g.value[0]),y=i([]),p=i(0),w=h(()=>p.value*f),b=i(!1),c=i(!1),C=i(null),D=h(()=>{const a=new URLSearchParams;return a.append("skip",w.value.toString()),a.append("limit",f.toString()),a.append("sort","createdAt,DESC"),a.append("where",`userId,${$.user.id}`),d.value.toLowerCase()!=="all"&&a.append("where",`status,${d.value.toLowerCase()}`),a.toString()}),_=async()=>{await O(`user/investments?${D.value}`,{loading:c,error:C,config:{router:x,cache:!0}},a=>{b.value=a.data.length<f,y.value=a.data})};return Y(p,()=>_(),{immediate:!0}),(a,t)=>{const S=K,v=P,R=E,l=I,V=N,k=A,L=T;return B(),M("div",null,[o("div",q,[o("div",G,[t[10]||(t[10]=o("h1",{class:"text-lg font-semibold text-primary-500 dark:text-primary-400"},"Investment History",-1)),o("div",J,[o("div",Q,[t[9]||(t[9]=o("p",{class:"text-sm font-medium text-mute text-right"},"Status",-1)),s(S,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),size:"small",options:g.value},null,8,["modelValue","options"])]),s(v,{onClick:_,loading:c.value,label:"Submit",size:"small"},null,8,["loading"])]),s(v,{onClick:t[1]||(t[1]=e=>u.value=!0),class:"md:hidden",label:"Filters",icon:"pi pi-filter","icon-pos":"right",size:"small"})]),s(R,{visible:u.value,"onUpdate:visible":t[5]||(t[5]=e=>u.value=e),modal:"",header:"Filters",class:"w-80"},{default:n(()=>[o("div",W,[o("div",X,[t[11]||(t[11]=o("p",{class:"text-sm font-medium text-mute"},"Status",-1)),s(S,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),size:"small",options:g.value},null,8,["modelValue","options"])]),o("div",Z,[s(v,{onClick:t[3]||(t[3]=e=>u.value=!1),size:"small",severity:"secondary",label:"Cancel"}),s(v,{onClick:t[4]||(t[4]=e=>{u.value=!1}),loading:c.value,size:"small",label:"Submit"},null,8,["loading"])])])]),_:1},8,["visible"])]),o("div",ee,[o("div",te,[s(k,{loading:c.value,value:y.value,selectionMode:"single",dataKey:"id",metaKeySelection:!1,stripedRows:"",onRowSelect:t[6]||(t[6]=e=>a.$router.push({name:"investment",params:{investmentId:e.data.id}})),tableStyle:"min-width: 50rem; white-space: nowrap"},{default:n(()=>[s(l,{field:"initialDeposit",header:"Deposit"},{body:n(({data:e})=>[m(r(`$${e.initialDeposit.toLocaleString()}`),1)]),_:1}),s(l,{field:"investmentName",header:"Name"}),s(l,{field:"investmentTier",header:"Tier"}),s(l,{field:"initialDeposit",header:"Auto-compounded"},{body:n(({data:e})=>[m(r(e.autocompounded?"Yes":"No"),1)]),_:1}),s(l,{field:"expectedReturnRate",header:"Rate"},{body:n(({data:e})=>[m(r(`${e.autocompounded?e.autocompoundedReturnRate:e.expectedReturnRate}%`),1)]),_:1}),s(l,{header:"Expected Return"},{body:n(({data:e})=>[m(r(`$${e.expectedTotalReturns.toLocaleString()}`),1)]),_:1}),s(l,{header:"Current Return"},{body:n(({data:e})=>[m(r(`$${e.currentTotalReturns.toLocaleString()}`),1)]),_:1}),s(l,{field:"duration",header:"Duration (days)"}),s(l,{field:"daysCompleted",header:"Days Completed"}),s(l,{field:"createdAt",header:"Date"},{body:n(({data:e})=>[o("p",null,r(j(H)(e.createdAt,"dddd YYYY-MM-DD, hh:mm:ss A",{locales:"en-US"})),1)]),_:1}),s(l,{field:"status",header:"Status"},{body:n(({data:e})=>[s(V,{severity:e.status==="open"?"":e.status==="closed"?"success":"danger",value:e.status},null,8,["severity","value"])]),_:1})]),_:1},8,["loading","value"]),s(L,{allLoaded:b.value,rows:f,onPrev:t[7]||(t[7]=e=>p.value=e),onNext:t[8]||(t[8]=e=>p.value=e)},null,8,["allLoaded"])])])])}}});export{ve as default};
