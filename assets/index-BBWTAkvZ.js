import{N as q,D as le,T as se,E as fe,U as ce,R as Z,V as z,C as de,W as H,X as J,Y as pe,Z as ie,P as ye,$ as ve,o as he,c as me,I as be,w as ge,S as we,a0 as Oe}from"./index-k-7ViVgn.js";function U(e){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},U(e)}function Q(e,r){return Pe(e)||$e(e,r)||Se(e,r)||je()}function je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Se(e,r){if(e){if(typeof e=="string")return ee(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ee(e,r):void 0}}function ee(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=Array(r);t<r;t++)i[t]=e[t];return i}function $e(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var i,y,j,O,h=[],m=!0,w=!1;try{if(j=(t=t.call(e)).next,r!==0)for(;!(m=(i=j.call(t)).done)&&(h.push(i.value),h.length!==r);m=!0);}catch(k){w=!0,y=k}finally{try{if(!m&&t.return!=null&&(O=t.return(),Object(O)!==O))return}finally{if(w)throw y}}return h}}function Pe(e){if(Array.isArray(e))return e}function re(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(y){return Object.getOwnPropertyDescriptor(e,y).enumerable})),t.push.apply(t,i)}return t}function ke(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?re(Object(t),!0).forEach(function(i){ue(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function ue(e,r,t){return(r=Ee(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ee(e){var r=Ae(e,"string");return U(r)=="symbol"?r:r+""}function Ae(e,r){if(U(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var i=t.call(e,r||"default");if(U(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function C(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */C=function(){return r};var e,r={},t=Object.prototype,i=t.hasOwnProperty,y=Object.defineProperty||function(o,n,a){o[n]=a.value},j=typeof Symbol=="function"?Symbol:{},O=j.iterator||"@@iterator",h=j.asyncIterator||"@@asyncIterator",m=j.toStringTag||"@@toStringTag";function w(o,n,a){return Object.defineProperty(o,n,{value:a,enumerable:!0,configurable:!0,writable:!0}),o[n]}try{w({},"")}catch{w=function(a,l,f){return a[l]=f}}function k(o,n,a,l){var f=n&&n.prototype instanceof g?n:g,d=Object.create(f.prototype),u=new D(l||[]);return y(d,"_invoke",{value:x(o,a,u)}),d}function F(o,n,a){try{return{type:"normal",arg:o.call(n,a)}}catch(l){return{type:"throw",arg:l}}}r.wrap=k;var M="suspendedStart",Y="suspendedYield",A="executing",c="completed",s={};function g(){}function S(){}function b(){}var p={};w(p,O,function(){return this});var P=Object.getPrototypeOf,v=P&&P(P(R([])));v&&v!==t&&i.call(v,O)&&(p=v);var T=b.prototype=g.prototype=Object.create(p);function L(o){["next","throw","return"].forEach(function(n){w(o,n,function(a){return this._invoke(n,a)})})}function B(o,n){function a(f,d,u,$){var E=F(o[f],o,d);if(E.type!=="throw"){var N=E.arg,_=N.value;return _&&U(_)=="object"&&i.call(_,"__await")?n.resolve(_.__await).then(function(G){a("next",G,u,$)},function(G){a("throw",G,u,$)}):n.resolve(_).then(function(G){N.value=G,u(N)},function(G){return a("throw",G,u,$)})}$(E.arg)}var l;y(this,"_invoke",{value:function(d,u){function $(){return new n(function(E,N){a(d,u,E,N)})}return l=l?l.then($,$):$()}})}function x(o,n,a){var l=M;return function(f,d){if(l===A)throw Error("Generator is already running");if(l===c){if(f==="throw")throw d;return{value:e,done:!0}}for(a.method=f,a.arg=d;;){var u=a.delegate;if(u){var $=I(u,a);if($){if($===s)continue;return $}}if(a.method==="next")a.sent=a._sent=a.arg;else if(a.method==="throw"){if(l===M)throw l=c,a.arg;a.dispatchException(a.arg)}else a.method==="return"&&a.abrupt("return",a.arg);l=A;var E=F(o,n,a);if(E.type==="normal"){if(l=a.done?c:Y,E.arg===s)continue;return{value:E.arg,done:a.done}}E.type==="throw"&&(l=c,a.method="throw",a.arg=E.arg)}}}function I(o,n){var a=n.method,l=o.iterator[a];if(l===e)return n.delegate=null,a==="throw"&&o.iterator.return&&(n.method="return",n.arg=e,I(o,n),n.method==="throw")||a!=="return"&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),s;var f=F(l,o.iterator,n.arg);if(f.type==="throw")return n.method="throw",n.arg=f.arg,n.delegate=null,s;var d=f.arg;return d?d.done?(n[o.resultName]=d.value,n.next=o.nextLoc,n.method!=="return"&&(n.method="next",n.arg=e),n.delegate=null,s):d:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,s)}function K(o){var n={tryLoc:o[0]};1 in o&&(n.catchLoc=o[1]),2 in o&&(n.finallyLoc=o[2],n.afterLoc=o[3]),this.tryEntries.push(n)}function V(o){var n=o.completion||{};n.type="normal",delete n.arg,o.completion=n}function D(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(K,this),this.reset(!0)}function R(o){if(o||o===""){var n=o[O];if(n)return n.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var a=-1,l=function f(){for(;++a<o.length;)if(i.call(o,a))return f.value=o[a],f.done=!1,f;return f.value=e,f.done=!0,f};return l.next=l}}throw new TypeError(U(o)+" is not iterable")}return S.prototype=b,y(T,"constructor",{value:b,configurable:!0}),y(b,"constructor",{value:S,configurable:!0}),S.displayName=w(b,m,"GeneratorFunction"),r.isGeneratorFunction=function(o){var n=typeof o=="function"&&o.constructor;return!!n&&(n===S||(n.displayName||n.name)==="GeneratorFunction")},r.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,b):(o.__proto__=b,w(o,m,"GeneratorFunction")),o.prototype=Object.create(T),o},r.awrap=function(o){return{__await:o}},L(B.prototype),w(B.prototype,h,function(){return this}),r.AsyncIterator=B,r.async=function(o,n,a,l,f){f===void 0&&(f=Promise);var d=new B(k(o,n,a,l),f);return r.isGeneratorFunction(n)?d:d.next().then(function(u){return u.done?u.value:d.next()})},L(T),w(T,m,"Generator"),w(T,O,function(){return this}),w(T,"toString",function(){return"[object Generator]"}),r.keys=function(o){var n=Object(o),a=[];for(var l in n)a.push(l);return a.reverse(),function f(){for(;a.length;){var d=a.pop();if(d in n)return f.value=d,f.done=!1,f}return f.done=!0,f}},r.values=R,D.prototype={constructor:D,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(V),!n)for(var a in this)a.charAt(0)==="t"&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var a=this;function l(N,_){return u.type="throw",u.arg=n,a.next=N,_&&(a.method="next",a.arg=e),!!_}for(var f=this.tryEntries.length-1;f>=0;--f){var d=this.tryEntries[f],u=d.completion;if(d.tryLoc==="root")return l("end");if(d.tryLoc<=this.prev){var $=i.call(d,"catchLoc"),E=i.call(d,"finallyLoc");if($&&E){if(this.prev<d.catchLoc)return l(d.catchLoc,!0);if(this.prev<d.finallyLoc)return l(d.finallyLoc)}else if($){if(this.prev<d.catchLoc)return l(d.catchLoc,!0)}else{if(!E)throw Error("try statement without catch or finally");if(this.prev<d.finallyLoc)return l(d.finallyLoc)}}}},abrupt:function(n,a){for(var l=this.tryEntries.length-1;l>=0;--l){var f=this.tryEntries[l];if(f.tryLoc<=this.prev&&i.call(f,"finallyLoc")&&this.prev<f.finallyLoc){var d=f;break}}d&&(n==="break"||n==="continue")&&d.tryLoc<=a&&a<=d.finallyLoc&&(d=null);var u=d?d.completion:{};return u.type=n,u.arg=a,d?(this.method="next",this.next=d.finallyLoc,s):this.complete(u)},complete:function(n,a){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&a&&(this.next=a),s},finish:function(n){for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a];if(l.finallyLoc===n)return this.complete(l.completion,l.afterLoc),V(l),s}},catch:function(n){for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a];if(l.tryLoc===n){var f=l.completion;if(f.type==="throw"){var d=f.arg;V(l)}return d}}throw Error("illegal catch attempt")},delegateYield:function(n,a,l){return this.delegate={iterator:R(n),resultName:a,nextLoc:l},this.method==="next"&&(this.arg=e),s}},r}function te(e,r,t,i,y,j,O){try{var h=e[j](O),m=h.value}catch(w){return void t(w)}h.done?r(m):Promise.resolve(m).then(i,y)}function X(e){return function(){var r=this,t=arguments;return new Promise(function(i,y){var j=e.apply(r,t);function O(m){te(j,i,y,O,h,"next",m)}function h(m){te(j,i,y,O,h,"throw",m)}O(void 0)})}}function Le(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;se()?fe(e):r?e():ce(e)}var Ie=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=q({}),i=q({}),y=le(function(){return Object.values(t).every(function(A){return!A.invalid})}),j=function(c,s){var g;return{value:s??((g=r.initialValues)===null||g===void 0?void 0:g[c]),touched:!1,dirty:!1,pristine:!0,valid:!0,invalid:!1,error:null,errors:[]}},O=function(c,s){var g=z(s,c);return g===!0||H(g)&&g.includes(c)},h=function(){var A=X(C().mark(function c(s,g){var S,b,p;return C().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(b={},!H(r[s])){v.next=7;break}return v.next=4,F(r[s]);case 4:b=v.sent,v.next=12;break;case 7:if(v.t0=(S=r[s])!==null&&S!==void 0?S:g,!v.t0){v.next=12;break}return v.next=11,F();case 11:b=v.sent;case 12:if(p=Object.keys(i).filter(function(T){var L;return(L=i[T])===null||L===void 0||(L=L.options)===null||L===void 0?void 0:L[s]})||[],v.t1=ie(p),!v.t1){v.next=18;break}return v.next=17,F(p);case 17:b=v.sent;case 18:return v.abrupt("return",b);case 19:case"end":return v.stop()}},c)}));return function(s,g){return A.apply(this,arguments)}}(),m=function(c,s,g,S){var b,p;((b=s==null?void 0:s[g])!==null&&b!==void 0?b:O(c,(p=r[g])!==null&&p!==void 0?p:S))&&F(c)},w=function(c,s){var g;t[c]||(t[c]=j(c,s==null?void 0:s.initialValue));var S=Z((g=z(s,t[c]))===null||g===void 0?void 0:g.props,z(s==null?void 0:s.props,t[c]),{name:c,onBlur:function(){t[c].touched=!0,m(c,s,"validateOnBlur")},onInput:function(p){t[c].value=p.hasOwnProperty("value")?p.value:p.target.value},onChange:function(p){t[c].value=p.hasOwnProperty("value")?p.value:p.target.type==="checkbox"||p.target.type==="radio"?p.target.checked:p.target.value},onInvalid:function(p){var P;t[c].invalid=!0,t[c].errors=p,t[c].error=(P=p==null?void 0:p[0])!==null&&P!==void 0?P:null}});return i[c]={props:S,states:t[c],options:s},de(function(){return t[c].value},function(b,p){t[c].pristine&&(t[c].pristine=!1),b!==p&&(t[c].dirty=!0),m(c,s,"validateOnValueUpdate",!0)}),[t[c],S]},k=function(c){return function(){var s=X(C().mark(function g(S){var b;return C().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,h("validateOnSubmit",!0);case 2:return b=P.sent,P.abrupt("return",c(ke({originalEvent:S,valid:J(y),states:J(t),reset:M},b)));case 4:case"end":return P.stop()}},g)}));return function(g){return s.apply(this,arguments)}}()},F=function(){var A=X(C().mark(function c(s){var g,S,b,p,P,v,T,L,B,x,I,K,V,D,R,o,n,a,l,f;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return P=Object.entries(t).reduce(function($,E){var N=Q(E,2),_=N[0],G=N[1];return $.names.push(_),$.values[_]=G.value,$},{names:[],values:{}}),u.next=3,(S=r.resolver)===null||S===void 0?void 0:S.call(r,P);case 3:if(u.t1=g=u.sent,u.t0=u.t1!==null,!u.t0){u.next=7;break}u.t0=g!==void 0;case 7:if(!u.t0){u.next=11;break}u.t2=g,u.next=12;break;case 11:u.t2={};case 12:v=u.t2,(p=(b=v).errors)!==null&&p!==void 0||(b.errors={}),T=[s].flat(),L=0,B=Object.entries(i);case 16:if(!(L<B.length)){u.next=44;break}if(x=Q(B[L],2),I=x[0],K=x[1],!(T.includes(I)||!s)){u.next=41;break}if(o=(V=K.options)===null||V===void 0?void 0:V.resolver,!o){u.next=36;break}return a=K.states.value,u.next=24,o({values:a,value:a,name:I});case 24:if(u.t4=n=u.sent,u.t3=u.t4!==null,!u.t3){u.next=28;break}u.t3=n!==void 0;case 28:if(!u.t3){u.next=32;break}u.t5=n,u.next=33;break;case 32:u.t5={};case 33:l=u.t5,H(l.errors)&&(l.errors=ue({},I,l.errors)),v=pe(v,l);case 36:f=(D=v.errors[I])!==null&&D!==void 0?D:[],t[I].invalid=f.length>0,t[I].valid=!t[I].invalid,t[I].errors=f,t[I].error=(R=f==null?void 0:f[0])!==null&&R!==void 0?R:null;case 41:L++,u.next=16;break;case 44:return u.abrupt("return",v);case 45:case"end":return u.stop()}},c)}));return function(s){return A.apply(this,arguments)}}(),M=function(){Object.keys(t).forEach(function(c){var s;return i[c].states=t[c]=j(c,(s=i[c])===null||s===void 0||(s=s.options)===null||s===void 0?void 0:s.initialValue)})},Y=function(){h("validateOnMount")};return Le(Y),{defineField:w,handleSubmit:k,validate:F,reset:M,valid:y,states:t,fields:i}},Fe={root:"p-form p-component"},Te=ye.extend({name:"form",classes:Fe}),_e={name:"BaseForm",extends:we,style:Te,props:{resolver:{type:Function,default:null},initialValues:{type:Object,default:null},validateOnValueUpdate:{type:[Boolean,Array],default:!0},validateOnBlur:{type:[Boolean,Array],default:!1},validateOnMount:{type:[Boolean,Array],default:!1},validateOnSubmit:{type:[Boolean,Array],default:!0}},provide:function(){return{$pcForm:this,$parentInstance:this}}};function W(e){"@babel/helpers - typeof";return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},W(e)}function ne(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(y){return Object.getOwnPropertyDescriptor(e,y).enumerable})),t.push.apply(t,i)}return t}function Ne(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ne(Object(t),!0).forEach(function(i){Ge(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function Ge(e,r,t){return(r=Be(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Be(e){var r=Me(e,"string");return W(r)=="symbol"?r:r+""}function Me(e,r){if(W(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var i=t.call(e,r||"default");if(W(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ve(e,r){return Ue(e)||Ce(e,r)||Re(e,r)||De()}function De(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Re(e,r){if(e){if(typeof e=="string")return ae(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ae(e,r):void 0}}function ae(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=Array(r);t<r;t++)i[t]=e[t];return i}function Ce(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var i,y,j,O,h=[],m=!0,w=!1;try{if(j=(t=t.call(e)).next,r!==0)for(;!(m=(i=j.call(t)).done)&&(h.push(i.value),h.length!==r);m=!0);}catch(k){w=!0,y=k}finally{try{if(!m&&t.return!=null&&(O=t.return(),Object(O)!==O))return}finally{if(w)throw y}}return h}}function Ue(e){if(Array.isArray(e))return e}var xe={name:"Form",extends:_e,inheritAttrs:!1,emits:["submit"],setup:function(r,t){var i=t.emit,y=Ie(r),j=function(m,w){var k=y.defineField(m,w),F=Ve(k,2),M=F[1];return M},O=y.handleSubmit(function(h){i("submit",h)});return Ne({register:j,onSubmit:O},ve(y,["handleSubmit"]))}};function Ke(e,r,t,i,y,j){return he(),me("form",Z({onSubmit:r[0]||(r[0]=ge(function(){return i.onSubmit&&i.onSubmit.apply(i,arguments)},["prevent"])),class:e.cx("root")},e.ptmi("root")),[be(e.$slots,"default",Z({register:i.register,valid:e.valid,reset:e.reset},e.states))],16)}xe.render=Ke;var oe=(e,r)=>Oe(e)&&e.hasOwnProperty(r)?e:r?{[r]:e}:e,Ye=(e,r,t)=>async({values:i,name:y})=>{const{sync:j=!1,raw:O=!1}={};try{const h=await e[j?"parse":"parseAsync"](i,r);return{values:oe(O?i:h,y),errors:{}}}catch(h){if(Array.isArray(h==null?void 0:h.errors))return{values:oe(O?i:void 0,y),errors:h.errors.reduce((m,w)=>{const k=ie(w.path)?w.path[0]:y;return k&&(m[k]||(m[k]=[]),m[k].push(w)),m},{})};throw h}};export{xe as s,Ye as z};
