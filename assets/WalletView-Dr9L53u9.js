import{P as B,ax as L,o as d,c as h,b as n,R as w,S as A,f as $,E as k,h as y,a as l,v as m,q as C,H as I,A as R,r as W,t as p,F as M,i as N,n as F,j as x,a4 as U,s as z,K as Y}from"./index-k-7ViVgn.js";import{s as q}from"./index-Cfn63MK0.js";import{_ as K}from"./VCard.vue_vue_type_script_setup_true_lang-DiPn360S.js";import{_ as G}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-B7HlNIPr.js";import{_ as H}from"./PageLoader-COy97JVn.js";import{_ as J}from"./VNavbar.vue_vue_type_script_setup_true_lang-HfkB0Wd3.js";import{u as Q}from"./index-HWEJQlsh.js";import{t as X}from"./helpers-BF5XYaOm.js";var Z={root:{position:"relative"}},tt={root:"p-chart"},et=B.extend({name:"chart",classes:tt,inlineStyles:Z}),at={name:"BaseChart",extends:A,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:et,provide:function(){return{$pcChart:this,$parentInstance:this}}},j={name:"Chart",extends:at,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;L(()=>import("./auto-Q-Ce4MY6.js"),[]).then(function(a){e.chart&&(e.chart.destroy(),e.chart=null),a&&a.default&&(e.chart=new a.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var a=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),s=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);a&&a[0]&&s&&this.$emit("select",{originalEvent:e,element:a[0],dataset:s})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function g(t){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(t)}function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),a.push.apply(a,s)}return a}function P(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?S(Object(a),!0).forEach(function(s){st(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function st(t,e,a){return(e=nt(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function nt(t){var e=rt(t,"string");return g(e)=="symbol"?e:e+""}function rt(t,e){if(g(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,e||"default");if(g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ot=["width","height"];function it(t,e,a,s,c,i){return d(),h("div",w({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[n("canvas",w({ref:"canvas",width:t.width,height:t.height,onClick:e[0]||(e[0]=function(u){return i.onCanvasClick(u)})},P(P({},t.canvasProps),t.ptm("canvas"))),null,16,ot)],16)}j.render=it;const lt={class:"w-full flex items-center justify-center"},ct=$({__name:"DepositWithdrawalChart",props:{transactions:{}},setup(t){k(()=>{e.value=s(),a.value=c()});const e=y(),a=y(),s=()=>{const i=getComputedStyle(document.documentElement),u=t.transactions.filter(f=>f.transactionType==="deposit"),o=t.transactions.filter(f=>f.transactionType==="withdrawal");return{labels:["Deposits","Withdrawals"],datasets:[{data:[u.length,o.length],backgroundColor:[i.getPropertyValue("--p-emerald-500"),i.getPropertyValue("--p-red-500"),i.getPropertyValue("--p-gray-500")],hoverBackgroundColor:[i.getPropertyValue("--p-emerald-400"),i.getPropertyValue("--p-red-400"),i.getPropertyValue("--p-gray-400")]}]}},c=()=>({plugins:{legend:{labels:{usePointStyle:!0,color:getComputedStyle(document.documentElement).getPropertyValue("--p-text-color")}}}});return(i,u)=>{const o=j;return d(),h("div",lt,[l(o,{type:"doughnut",data:e.value,options:a.value,class:"h-full"},null,8,["data","options"])])}}}),ut={class:"h-full"},dt={class:"flex items-center gap-2"},pt={class:"mt-2 overflow-y-auto md:h-[calc(100dvh-8.5rem)]"},mt={key:1,class:"flex items-center justify-center w-full h-full"},ht={key:2,class:"w-full h-full grid gap-2 md:grid-rows-6 md:grid-cols-7"},ft={class:"flex justify-end mb-2"},yt={class:"flex flex-col items-end justify-end"},gt={class:"text-right text-2xl md:text-5xl font-semibold"},vt={class:"text-xl"},_t={class:"flex gap-1 justify-between"},bt={class:"py-2 h-[calc(100%-2rem)] overflow-y-auto flex flex-col gap-2 *:flex-shrink-0"},wt={class:"flex items-center"},Ct={class:"text-mute font-semibold"},xt={class:"flex items-baseline gap-1 justify-between"},St={class:"text-mute"},Pt={class:"text-right text-xl font-semibold"},$t={class:"text-base text-mute"},kt={class:"w-full overflow-y-auto md:h-[calc(100%-4rem)]"},At=$({__name:"WalletView",setup(t){const e=R(),a=y(!1),s=y(null),c=y(null),i=async()=>{await Q("user/pages/wallet",{loading:a,error:s,config:{router:e,cache:!0}},u=>{c.value=u})};return k(async()=>{await i()}),(u,o)=>{const v=z,f=J,O=H,D=G,b=Y,_=K,E=q,T=W("RouterLink"),V=ct;return d(),h("div",ut,[l(f,null,{right:m(()=>[n("div",dt,[l(v,{onClick:o[0]||(o[0]=r=>u.$router.push({name:"deposit"})),size:"small",label:"Deposit",icon:"pi pi-wallet"}),l(v,{onClick:o[1]||(o[1]=r=>u.$router.push({name:"withdraw"})),size:"small",label:"Withdraw",icon:"pi pi-money-bill",severity:"secondary"})])]),_:1}),n("div",pt,[a.value?(d(),C(O,{key:0})):s.value?(d(),h("div",mt,[l(D,{error:s.value,request:"GET",onRetry:i},null,8,["error"])])):c.value?(d(),h("div",ht,[l(_,{class:"md:col-span-4 md:row-span-2 bg-gradient-y text-white",header:"Available Balance","header-class":"text-white"},{default:m(()=>[n("div",ft,[l(b,{name:"attach_money",class:"bg-white text-primary-500 p-2 rounded-full aspect-square"})]),n("div",yt,[n("p",gt,p(c.value.walletBalance.toLocaleString().split(".")[0]),1),n("p",vt,"."+p(c.value.walletBalance.toLocaleString().split(".")[1]??"00"),1)])]),_:1}),l(_,{class:"md:col-span-3 md:row-span-6",header:"Recent Transactions"},{header:m(()=>[n("div",_t,[o[3]||(o[3]=n("h3",{class:"font-semibold text-mute"},"Recent Transactions",-1)),l(v,{onClick:o[2]||(o[2]=r=>u.$router.push({name:"wallet-history"})),size:"small",label:"See all",severity:"secondary",class:"dark:bg-slate-700 dark:hover:bg-slate-800 dark:border-transparent"})])]),default:m(()=>[n("div",bt,[(d(!0),h(M,null,N(c.value.transactions,r=>(d(),C(T,{key:r.id,to:{name:"transaction",params:{id:r.id}},class:"v-card !p-2 border transition-all hover:bg-slate-50 dark:hover:bg-slate-700 dark:border-white/30 dark:bg-slate-800"},{default:m(()=>[n("div",wt,[l(b,{prime:"",name:r.transactionType==="deposit"?"arrow-circle-down":"arrow-circle-up",class:F(["p-1 rounded-full",r.transactionType==="deposit"?"text-emerald-500":"text-red-500"])},null,8,["name","class"]),n("p",Ct,p(r.isWireTransfer?"Wire Transfer":r.currency)+" "+p(x(X)(r.transactionType)),1),l(E,{severity:r.status==="failed"?"danger":r.status==="pending"?"warn":"success",value:r.status,class:"ml-auto text-[0.7rem] px-1 py-0.5"},null,8,["severity","value"])]),n("div",xt,[n("small",St,p(x(U)(r.createdAt,"MMM DD, YYYY hh:mm:ss A",{locales:"en-US"})),1),n("p",Pt,[n("span",null,"$"+p(r.amountInUSD.toLocaleString().split(".")[0]),1),n("span",$t,"."+p(r.amountInUSD.toLocaleString().split(".")[1]??"00"),1)])])]),_:2},1032,["to"]))),128))])]),_:1}),l(_,{class:"md:col-span-4 md:row-span-4",header:"Deposit-Withdrawal Trend"},{default:m(()=>[o[4]||(o[4]=n("small",{class:"font-medium"},"Last 20 transactions",-1)),n("div",kt,[l(V,{transactions:c.value.transactions},null,8,["transactions"])])]),_:1})])):I("",!0)])])}}});export{At as default};
