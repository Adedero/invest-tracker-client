import{_ as W}from"./VPaginator.vue_vue_type_script_setup_true_lang-Ca-Vza0W.js";import{s as j,a as F}from"./index-2Uz0LzdM.js";import{s as G}from"./index-BWNXx86c.js";import{f as H,h as n,D as k,bp as J,o as m,c as I,a,v as l,b as o,q as L,j as p,H as Q,L as X,A as Z,k as f,t as i,n as ee,a4 as te,s as ae,K as se}from"./index-rkqDWn-K.js";import{_ as oe}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-BkdBNGI_.js";import{_ as ne}from"./PageLoader-62ICEvpm.js";import{_ as le}from"./VCard.vue_vue_type_script_setup_true_lang-G04ysE6h.js";import{s as re}from"./index-2e_aBQmh.js";import{u as ie}from"./index-BJLvgVPt.js";import{t as N}from"./helpers-BF5XYaOm.js";import"./index-p1M208JQ.js";import"./index-DMxJWgcx.js";import"./index-BZ2gPtDN.js";import"./index-Bv-llqAV.js";import"./index-DOXnOG33.js";const ce={class:"flex flex-col md:flex-row gap-2 justify-between"},ue={class:"flex items-end gap-1 flex-wrap"},de={class:"flex gap-1 flex-col"},me={class:"flex gap-1 flex-col"},pe={class:"mt-2 md:h-[calc(100dvh-10rem)]"},fe={key:2,class:"h-full w-full overflow-auto"},_e={class:"text-sm font-medium"},_=10,Ne=H({__name:"TransactionsView",setup(ve){var C;const M=X(),x=Z(),w=(C=M.query.userId)==null?void 0:C.toString(),c=n("pending"),z=n(["all","pending","successful","failed"]),u=n("all"),A=n(["all","deposit","withdrawal","investment","profit"]),h=n(0),b=k(()=>h.value*_),T=k(()=>{const e=new URLSearchParams;return e.append("skip",b.value.toString()),e.append("limit",_.toString()),e.append("sort","createdAt,DESC"),e.append("relation","user"),w&&e.append("where",`userId,${w}`),c.value!=="all"&&e.append("where",`status,${c.value}`),u.value!=="all"&&e.append("where",`transactionType,${u.value}`),e.toString()}),v=n(),d=n(!1),g=n(),S=n(!1),y=async()=>{await ie(`admin/transactions?${T.value}`,{loading:d,error:g,config:{router:x,cache:!0}},e=>{S.value=e.data.length<_,v.value=e.data})};J(T,y,{debounce:600,maxWait:1e3,immediate:!0});async function V(e){h.value=e}function $(e){return e==="deposit"?{icon:"arrow_circle_down",color:"text-primary-500"}:e==="withdrawal"?{icon:"arrow_circle_up",color:"text-red-500"}:e==="investment"?{icon:"spa",color:"text-green-500"}:{icon:"payments",color:"text-green-500"}}function B(e){return e==="successful"?"success":e==="pending"?"warn":"danger"}return(e,s)=>{const D=re,P=ae,R=le,U=ne,Y=oe,r=F,q=se,E=G,K=j,O=W;return m(),I("div",null,[a(R,{class:"py-2"},{default:l(()=>[o("div",ce,[s[5]||(s[5]=o("h1",{class:"text-lg font-semibold text-primary-500"},"Transactions",-1)),o("div",ue,[o("div",de,[s[3]||(s[3]=o("label",{class:"text-xs text-mute font-semibold"},"Status",-1)),a(D,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),options:z.value,size:"small",class:"py-0"},null,8,["modelValue","options"])]),o("div",me,[s[4]||(s[4]=o("label",{class:"text-xs text-mute font-semibold"},"Type",-1)),a(D,{modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=t=>u.value=t),options:A.value,size:"small",class:"py-0"},null,8,["modelValue","options"])]),a(P,{onClick:y,loading:d.value,size:"small",label:"Submit"},null,8,["loading"])])])]),_:1}),o("div",pe,[d.value?(m(),L(U,{key:0})):!d.value&&g.value?(m(),L(Y,{key:1,error:g.value,request:"GET",onRetry:y,closable:""},null,8,["error"])):v.value?(m(),I("div",fe,[a(K,{value:v.value,class:"text-sm min-w-[40rem]",selectionMode:"single",dataKey:"id",metaKeySelection:!1,onRowClick:s[2]||(s[2]=t=>p(x).push({name:"admin-transaction",params:{transactionId:t.data.id}}))},{default:l(()=>[a(r,{header:"S/N"},{body:l(({index:t})=>[f(i(t+1+b.value)+") ",1)]),_:1}),a(r,{header:"Type"},{body:l(({data:t})=>[o("div",{class:ee(["flex items-center gap-1",$(t.transactionType).color])},[a(q,{size:"20",name:$(t.transactionType).icon},null,8,["name"]),o("p",_e,i(p(N)(t.transactionType)),1)],2)]),_:1}),a(r,{field:"user.name",header:"User"}),a(r,{field:"amount",header:"Amount"},{body:l(({data:t})=>[f(" $"+i(t.amountInUSD.toLocaleString()),1)]),_:1}),a(r,{header:"Wire Transfer"},{body:l(({data:t})=>[f(i(t.isWireTransfer?"Yes":"No"),1)]),_:1}),a(r,{header:"Status"},{body:l(({data:t})=>[a(E,{class:"text-xs font-semibold",severity:B(t.status),value:p(N)(t.status)},null,8,["severity","value"])]),_:1}),a(r,{header:"Created On"},{body:l(({data:t})=>[f(i(p(te)(new Date(t.createdAt),"ddd, DD MMM, YYYY hh:mm aa")),1)]),_:1})]),_:1},8,["value"]),a(O,{allLoaded:S.value,rows:_,onPrev:V,onNext:V},null,8,["allLoaded"])])):Q("",!0)])])}}});export{Ne as default};
